import Foundation

class APIService {
    static let shared = APIService()
    private init() {}

    // Fake API for demo (replace with your backend URL)
    func login(email: String) async -> Bool {
        guard let url = URL(string: "https://api.com/login") else { return false }

        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.addValue("application/json", forHTTPHeaderField: "Content-Type")
        request.httpBody = try? JSONSerialization.data(withJSONObject: ["email": email])

        do {
            let (_, response) = try await URLSession.shared.data(for: request)
            if let httpResponse = response as? HTTPURLResponse {
                return httpResponse.statusCode == 200
            }
        } catch {
            print("Login error:", error.localizedDescription)
        }
        return false
    }

    func verifyOTP(email: String, otp: String) async -> Bool {
        guard let url = URL(string: "https://api.com/verify-otp") else { return false }

        var request = URLRequest(url: url)
        request.httpMethod = "POST"
        request.addValue("application/json", forHTTPHeaderField: "Content-Type")
        request.httpBody = try? JSONSerialization.data(withJSONObject: ["email": email, "otp": otp])

        do {
            let (_, response) = try await URLSession.shared.data(for: request)
            if let httpResponse = response as? HTTPURLResponse {
                return httpResponse.statusCode == 200
            }
        } catch {
            print("OTP verify error:", error.localizedDescription)
        }
        return false
    }
}
